[pytest]
# Pytest configuration for DR classification tests

# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Command line options
addopts =
    -v
    --strict-markers
    --tb=short
    -ra

# Custom markers
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    gpu: marks tests requiring GPU (skipped automatically if CUDA unavailable)
    integration: marks integration tests
    parametrize: marks parametrized tests

# Minimum Python version
minversion = 3.8

# Selective warning filters (suppress third-party noise, show our warnings)
filterwarnings =
    # Suppress unfixable third-party library warnings
    ignore:urllib3 v2 only supports OpenSSL
    ignore::urllib3.exceptions.NotOpenSSLWarning
    ignore:.*pydantic._internal._generate_schema.*
    ignore:Initializing zero-element tensors is a no-op
    ignore:.*ShiftScaleRotate is a special case of Affine.*
    ignore:Argument.* are not valid for transform CoarseDropout

    # Configuration warnings (informational, working as intended)
    ignore:CUDA requested but not available
    ignore:Apple Silicon GPU.*

    # Show warnings from our code (scripts directory)
    default::UserWarning:scripts
    default::DeprecationWarning:scripts

    # Suppress other library warnings
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Coverage options (if pytest-cov is installed)
# [coverage:run]
# source = scripts
# omit =
#     */tests/*
#     */venv/*
